(function(e){function t(t){for(var r,i,o=t[0],s=t[1],u=t[2],l=0,b=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&b.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(b.length)b.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15ab":function(e,t,n){"use strict";n("f5e6")},4104:function(e,t,n){"use strict";n("aafe")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("159b");var r=n("7a23"),a={id:"flexWrapper"},c={id:"topBarWrapper"},i=Object(r["g"])("button",{class:"btn btn-success",id:"btnToggleSideBar"},[Object(r["g"])("i",{class:"fas fa-bars"})],-1),o={id:"loginWrapper"},s={key:0},u=Object(r["g"])("i",{class:"fas fa-user-alt"},null,-1),d=Object(r["i"])("登出"),l=Object(r["i"])("登入"),b=Object(r["g"])("i",{class:"fas fa-chalkboard-teacher"},null,-1),f=Object(r["i"])("註冊"),m={id:"contentWrapper"},p={id:"sideBar",class:"side-bar",style:{display:"none"}},g={class:"nav-link"},j=Object(r["i"])("首頁"),O={class:"nav-link"},v=Object(r["i"])("留言板"),h=Object(r["g"])("div",{class:"nav-link"},[Object(r["g"])("a",{href:"https://bbljchatroom.azurewebsites.net/",target:"_blank"},"即時聊天室")],-1),w={class:"nav-link"},k=Object(r["i"])("會員專區"),y={id:"main"};function x(e,t,n,x,$,M){var L=Object(r["B"])("router-link"),I=Object(r["B"])("router-view");return Object(r["u"])(),Object(r["f"])("div",a,[Object(r["g"])("div",c,[i,Object(r["g"])("div",o,[e.userInfo.isLogin?(Object(r["u"])(),Object(r["f"])("div",s," 哈囉~~ "+Object(r["D"])(this.$data.userInfo.nickname)+"！ ",1)):Object(r["e"])("",!0),u,e.userInfo.isLogin?(Object(r["u"])(),Object(r["d"])(L,{key:1,to:"/logout"},{default:Object(r["J"])((function(){return[d]})),_:1})):(Object(r["u"])(),Object(r["d"])(L,{key:2,to:"/login"},{default:Object(r["J"])((function(){return[l]})),_:1})),b,Object(r["j"])(L,{to:"/register"},{default:Object(r["J"])((function(){return[f]})),_:1})])]),Object(r["g"])("div",m,[Object(r["g"])("div",p,[Object(r["g"])("div",g,[Object(r["j"])(L,{class:"my-link",to:"/"},{default:Object(r["J"])((function(){return[j]})),_:1})]),Object(r["g"])("div",O,[Object(r["j"])(L,{class:"my-link",to:"/discuss"},{default:Object(r["J"])((function(){return[v]})),_:1})]),h,Object(r["g"])("div",w,[Object(r["j"])(L,{class:"my-link",to:"/member"},{default:Object(r["J"])((function(){return[k]})),_:1})])]),Object(r["g"])("div",y,[Object(r["j"])(I,{onUserLogin:M.onUserLogin,onUpdateMember:M.onUpdateMember},null,8,["onUserLogin","onUpdateMember"])])])])}var $=n("1da1"),M=(n("d3b7"),n("96cf"),{name:"App",data:function(){var e={userInfo:{isLogin:!1,nickname:""},isDataReady:!1};return e},beforeMount:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onUserLogin:function(e){e.isLogin?this.$data.userInfo=e:(this.$data.userInfo.isLogin=!1,this.$data.userInfo.nickname="")},onUpdateMember:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("checkLogin.php",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e),{nickname:"",isLogin:!1}}));case 2:n=t.sent,e.$data.userInfo=n;case 4:case"end":return t.stop()}}),t)})))()}}});M.render=x;var L=M,I=n("6c02");Object(r["x"])("data-v-df846e3a");var R=Object(r["g"])("div",{id:"headWrapper"},[Object(r["g"])("h2",null,"歡迎來到~~靠北伯夷！")],-1),D=Object(r["g"])("div",{id:"bannerWrapper"},[Object(r["g"])("img",{id:"banner",src:"banner.png"})],-1),S={id:"instructionWrapper"},C={class:"instruction"},_=Object(r["i"])("有什麼話想對伯夷說嗎？想要找人聊聊天？來到靠北伯夷就對了！初來乍到的客人請先點擊右上方連結「"),P=Object(r["i"])("註冊"),E=Object(r["i"])("」為本站會員，並至信箱收信完成信箱驗證後即可至「"),W=Object(r["i"])("留言板"),H=Object(r["i"])("」用力留言，用力"),B=Object(r["g"])("b",null,"靠北伯夷",-1),T=Object(r["i"])("哦！"),U=Object(r["g"])("div",{class:"instruction"},[Object(r["i"])("如果您想找人聊天，請進入到靠北伯夷的「"),Object(r["g"])("a",{href:"https://bbljchatroom.azurewebsites.net/",target:"_blank"},"即時聊天室"),Object(r["i"])("」，與三五好友們一同閒話家常哦！")],-1),V={key:0,id:"loginMsgWrapper"},F={key:0},J=Object(r["i"])("訪客請先註冊或登入實聯制哦！");function K(e,t,n,a,c,i){var o=Object(r["B"])("router-link");return Object(r["u"])(),Object(r["f"])(r["a"],null,[R,D,Object(r["g"])("div",S,[Object(r["g"])("div",C,[_,Object(r["j"])(o,{to:"register"},{default:Object(r["J"])((function(){return[P]})),_:1}),E,Object(r["j"])(o,{to:"discuss"},{default:Object(r["J"])((function(){return[W]})),_:1}),H,B,T]),U]),e.isDataReady?(Object(r["u"])(),Object(r["f"])("div",V,[e.userInfo.isLogin?(Object(r["u"])(),Object(r["f"])("div",F)):(Object(r["u"])(),Object(r["d"])(o,{key:1,to:"login"},{default:Object(r["J"])((function(){return[J]})),_:1}))])):Object(r["e"])("",!0)],64)}Object(r["v"])();var A={name:"Home",data:function(){var e={isDataReady:!1,userInfo:{nickname:"",isLogin:!1}};return e},beforeMount:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkLogin();case 2:n=t.sent,n["isLogin"]&&(e.$data.userInfo=n,e.$emit("userLogin",e.$data.userInfo)),e.$data.isDataReady=!0;case 5:case"end":return t.stop()}}),t)})))()},methods:{checkLogin:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("checkLogin.php",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e),{nickname:"",isLogin:!1}}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()}}};n("d75e");A.render=K,A.__scopeId="data-v-df846e3a";var G=A;Object(r["x"])("data-v-59c667eb");var q=Object(r["g"])("div",{id:"headWrapper"},[Object(r["g"])("h2",null,"留言板")],-1),z={id:"msgWrapper"},N={id:"borderWrapper"},Q=Object(r["g"])("div",{class:"row"},[Object(r["g"])("div",{id:"btnMinimize"},[Object(r["g"])("button",{"data-bs-toggle":"collapse","data-bs-target":"#sendMsgWrapper","aria-expanded":"true","aria-controls":"sendMsgWrapper"},"隱藏/展開輸入框")])],-1),X={key:0,id:"sendMsgWrapper",class:"row collapse show"},Y={style:{width:"100%","text-align":"center"}},Z={key:1,id:"sendMsgWrapper",class:"row collapse show"},ee=Object(r["g"])("textarea",{class:"col-10",placeholder:"請先登入或註冊為本站會員",readonly:""},null,-1),te=Object(r["g"])("button",{class:"col-2",id:"btnSend",disabled:!0},"發送",-1),ne=[ee,te],re={key:0},ae=Object(r["g"])("div",{class:"paging",id:"pagingUp"},null,-1),ce={id:"chatArea",ref:"chatArea"},ie=Object(r["g"])("div",{class:"paging",id:"pagingDown"},null,-1),oe={key:1,style:{"text-align":"center"}},se=Object(r["g"])("img",{class:"loading",src:"loading.gif"},null,-1),ue={key:0};function de(e,t,n,a,c,i){var o=this,s=Object(r["B"])("Editor"),u=Object(r["B"])("Chat");return Object(r["u"])(),Object(r["f"])(r["a"],null,[q,Object(r["g"])("div",z,[Object(r["g"])("div",N,[Q,Object(r["g"])("form",{ref:"frmMsg",onSubmit:t[2]||(t[2]=Object(r["L"])((function(){}),["prevent"]))},[e.userInfo.isLogin?(Object(r["u"])(),Object(r["f"])("div",X,[Object(r["j"])(s,{"api-key":"h2pwmfgv62g9dilzcio6h1bpbpnirj8wcdl81rdyo35inx8n",init:{menubar:!1,plugins:"autolink wordcount",toolbar:"undo redo",default_link_target:"_blank",placeholder:"有什麼話想對伯夷說呢？"},class:"editor",modelValue:e.chatContent,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.chatContent=t}),ref:"msgEditor"},null,8,["modelValue"]),Object(r["g"])("div",Y,[Object(r["g"])("button",{type:"submit",id:"btnSend",onClick:t[1]||(t[1]=function(e){return i.sendMsg()})},"送出")])])):(Object(r["u"])(),Object(r["f"])("div",Z,ne))],544)])]),e.isDataReady?(Object(r["u"])(),Object(r["f"])("div",re,[ae,Object(r["g"])("div",ce,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(e.chats,(function(e){return Object(r["u"])(),Object(r["f"])("div",{key:e.id},[Object(r["j"])(u,{onChatDeleted:i.updateAllChats,id:e.id,uid:o.$data.userInfo.id,"member-id":e.memberId,nickname:e.nickname,"chat-content":e.chatContent,"created-date":e.createdDate},null,8,["onChatDeleted","id","uid","member-id","nickname","chat-content","created-date"])])})),128))],512),ie])):(Object(r["u"])(),Object(r["f"])("div",oe,[se,e.isFailed?(Object(r["u"])(),Object(r["f"])("p",ue,"無法取得留言板內容")):Object(r["e"])("",!0)]))],64)}Object(r["v"])();var le=n("b85c");n("a434");Object(r["x"])("data-v-18d92480");var be={class:"chat-wrapper"},fe={class:"nickname"},me=Object(r["i"])(" 說:"),pe=["innerHTML"],ge={class:"chat-bottom"},je={class:"created-date"},Oe={ref:"frm"};function ve(e,t,n,a,c,i){var o=this;return Object(r["u"])(),Object(r["f"])("div",be,[Object(r["g"])("p",null,[Object(r["g"])("span",fe,Object(r["D"])(n.nickname),1),me]),Object(r["g"])("p",{class:"chat-content",innerHTML:e.chatHtml},null,8,pe),Object(r["g"])("div",ge,[Object(r["g"])("div",je,Object(r["D"])(n.createdDate),1),n.uid==n.memberId?(Object(r["u"])(),Object(r["f"])("a",{key:0,onClick:t[0]||(t[0]=function(e){return i.btnDelClick(e)}),href:"#"},"刪除")):Object(r["e"])("",!0)]),Object(r["g"])("form",Oe,[Object(r["K"])(Object(r["g"])("input",{ref:"chatId",type:"hidden","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.$data.frmData.id=e})},null,512),[[r["H"],this.$data.frmData.id]])],512)])}Object(r["v"])();var he={props:["id","uid","memberId","nickname","chatContent","createdDate"],data:function(){var e={frmData:{id:this.id},chatHtml:this.$props.chatContent};return e},methods:{btnDelClick:function(e){var t=this;return Object($["a"])(regeneratorRuntime.mark((function n(){var r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),r=t.$refs.chatId,a=r.value,n.next=5,fetch("delChat.php?chatId=".concat(a),{method:"get"}).then((function(e){return e.json()})).catch((function(e){return console.log(e),{isSuccess:!1,errMsg:"刪除失敗！請洽管理員！"}}));case 5:c=n.sent,alert(c.errMsg),1==c.isSuccess&&t.$emit("chatDeleted");case 8:case"end":return n.stop()}}),n)})))()}}};n("15ab");he.render=ve,he.__scopeId="data-v-18d92480";var we=he,ke=n("ca72"),ye={name:"Discuss",data:function(){var e={chatContent:"",isDataReady:!1,isFailed:!1,userInfo:{id:-1,nickname:"",isLogin:!1},chats:[]};return e},beforeMount:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkLogin();case 2:n=t.sent,n["isLogin"]&&(e.$data.userInfo=n,e.$emit("userLogin",e.$data.userInfo));case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllChats();case 2:n=t.sent,r=Object(le["a"])(n);try{for(r.s();!(a=r.n()).done;)c=a.value,e.$data.chats.push(c)}catch(i){r.e(i)}finally{r.f()}0!=e.$data.chats.length?e.$data.isDataReady=!0:e.$data.isFailed=!0;case 6:case"end":return t.stop()}}),t)})))()},methods:{checkLogin:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("checkLogin.php",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e),{nickname:"",isLogin:!1}}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},sleep:function(){var e=new Promise((function(e,t){setTimeout((function(){e(!0)}),500)}));return e},getAllChats:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],t.next=3,e.sleep();case 3:return r=t.sent,t.next=6,fetch("chats.php",{method:"get"}).then((function(e){return e.json()})).then((function(e){return n=e,!0})).catch((function(e){return console.log(e),!0}));case 6:if(a=t.sent,!r||!a){t.next=9;break}return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))()},updateAllChats:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$data.chats.splice(0),e.$data.isDataReady=!1,e.$data.isFailed=!1,t.next=5,e.getAllChats();case 5:n=t.sent,r=Object(le["a"])(n);try{for(r.s();!(a=r.n()).done;)c=a.value,e.$data.chats.push(c)}catch(i){r.e(i)}finally{r.f()}0!=e.$data.chats.length?(e.$data.isDataReady=!0,e.$data.isFailed=!1):(e.$data.isDataReady=!1,e.$data.isFailed=!0);case 9:case"end":return t.stop()}}),t)})))()},sendMsg:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=window.tinymce,r=parseInt(n.activeEditor.plugins.wordcount.body.getWordCount()),!(r<=0)){t.next=7;break}return alert("請輸入您想對伯夷說的話！"),t.abrupt("return");case 7:return a=new FormData,a.append("ChatContent",e.$data.chatContent),t.next=11,fetch("sendChat.php",{method:"POST",body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e),{isSuccess:!1,errMsg:"張貼失敗！請重新登入會員或洽詢管理員"}}));case 11:if(c=t.sent,!c.isSuccess){t.next=16;break}return n.activeEditor.setContent(""),t.next=16,e.updateAllChats();case 16:alert(c.errMsg);case 17:case"end":return t.stop()}}),t)})))()}},components:{Chat:we,Editor:ke["a"]}};n("ecfe");ye.render=de,ye.__scopeId="data-v-59c667eb";var xe=ye;Object(r["x"])("data-v-109924c4");var $e=Object(r["g"])("div",{id:"headWrapper"},[Object(r["g"])("h2",null,"會員專區")],-1),Me={key:0},Le={key:0,id:"userInfoWrapper"},Ie={class:"row"},Re=Object(r["g"])("div",{class:"col-md-2"},[Object(r["g"])("label",{for:"userId"},"Id")],-1),De={class:"col-md-4"},Se=Object(r["g"])("div",{class:"col-md-2"},[Object(r["g"])("label",{for:"nickname"},"䁥稱")],-1),Ce={class:"col-md-4"},_e={class:"row"},Pe=Object(r["g"])("div",{class:"col-md-2"},[Object(r["g"])("label",{for:"email"},"Email")],-1),Ee={class:"col-md-4"},We={class:"col-md-2",id:"lblPwd"},He=Object(r["g"])("label",{for:"password"},"密碼",-1),Be=Object(r["g"])("i",{class:"fas fa-eye"},null,-1),Te=[Be],Ue={class:"col-md-4"},Ve={class:"row"},Fe=Object(r["g"])("div",{class:"col-md-2"},[Object(r["g"])("label",null,"權限")],-1),Je={class:"col-md-10"},Ke=Object(r["g"])("label",{for:"admin"},"管理員",-1),Ae=Object(r["g"])("label",{for:"manager"},"經理",-1),Ge=Object(r["g"])("label",{for:"user"},"會員",-1),qe={class:"row"},ze=Object(r["g"])("div",{class:"col-md-4"},null,-1),Ne={class:"col-md-4",id:"btnWrapper"},Qe={class:"btn btn-secondary",ref:"btnCancel"},Xe=Object(r["g"])("div",{class:"col-md-4"},null,-1),Ye={key:1},Ze=Object(r["i"])("訪客請先登入或註冊為本站會員！謝謝！");function et(e,t,n,a,c,i){var o=Object(r["B"])("router-link");return Object(r["u"])(),Object(r["f"])(r["a"],null,[$e,e.isDataReady?(Object(r["u"])(),Object(r["f"])("div",Me,[e.userInfo.isLogin?(Object(r["u"])(),Object(r["f"])("div",Le,[Object(r["g"])("div",Ie,[Re,Object(r["g"])("div",De,[Object(r["K"])(Object(r["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.userInfo.id=t}),id:"userId",class:"form-control",readonly:""},null,512),[[r["H"],e.userInfo.id]])]),Se,Object(r["g"])("div",Ce,[Object(r["K"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userInfo.nickname=t}),id:"nickname",class:"form-control"},null,512),[[r["H"],e.userInfo.nickname]])])]),Object(r["g"])("div",_e,[Pe,Object(r["g"])("div",Ee,[Object(r["K"])(Object(r["g"])("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.userInfo.email=t}),id:"email",class:"form-control",readonly:""},null,512),[[r["H"],e.userInfo.email]])]),Object(r["g"])("div",We,[He,Object(r["g"])("span",{ref:"btnReveal",id:"btnReveal",onClick:t[3]||(t[3]=function(){return i.reveal&&i.reveal.apply(i,arguments)})},Te,512)]),Object(r["g"])("div",Ue,[Object(r["K"])(Object(r["g"])("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.userInfo.password=t}),ref:"password",id:"password",class:"form-control"},null,512),[[r["H"],e.userInfo.password]])])]),Object(r["g"])("div",Ve,[Fe,Object(r["g"])("div",Je,[Object(r["K"])(Object(r["g"])("input",{type:"checkbox",id:"admin",value:"1","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.userInfo.roles=t}),disabled:""},null,512),[[r["G"],e.userInfo.roles]]),Ke,Object(r["K"])(Object(r["g"])("input",{type:"checkbox",id:"manager",value:"2","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.userInfo.roles=t}),disabled:""},null,512),[[r["G"],e.userInfo.roles]]),Ae,Object(r["K"])(Object(r["g"])("input",{type:"checkbox",id:"user",value:"3","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.userInfo.roles=t}),disabled:""},null,512),[[r["G"],e.userInfo.roles]]),Ge])]),Object(r["g"])("div",qe,[ze,Object(r["g"])("div",Ne,[Object(r["g"])("button",{class:"btn btn-primary",ref:"btnEdit",onClick:t[8]||(t[8]=function(){return i.frmSubmit&&i.frmSubmit.apply(i,arguments)})},"修改",512),Object(r["g"])("button",Qe,"取消",512)]),Xe])])):(Object(r["u"])(),Object(r["f"])("div",Ye,[Object(r["j"])(o,{to:"login"},{default:Object(r["J"])((function(){return[Ze]})),_:1})]))])):Object(r["e"])("",!0)],64)}Object(r["v"])();var tt={name:"Member",data:function(){var e={isDataReady:!1,userInfo:{isLogin:!1,email:"",nickname:"",password:"",id:"",roles:[]}};return e},beforeMount:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMemberInfo();case 2:n=t.sent,n.isLogin?(e.$data.userInfo.isLogin=!0,e.$data.userInfo.email=n.email,e.$data.userInfo.password=n.password,e.$data.userInfo.nickname=n.nickname,e.$data.userInfo.id=n.id,e.$data.userInfo.roles=n.roles):console.log("logout"),e.$data.isDataReady=!0;case 5:case"end":return t.stop()}}),t)})))()},methods:{getMemberInfo:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("member.php",{method:"get"}).then((function(e){return e.json()})).catch((function(e){return console.log(e),{isLogin:!1}}));case 2:return n=t.sent,e.$emit("userLogin",{isLogin:n.isLogin,nickname:n.nickname}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},reveal:function(){var e=this.$refs.password;"password"==e.type?e.type="text":e.type="password"},frmSubmit:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("Password",e.$data.userInfo.password),n.append("Nickname",e.$data.userInfo.nickname),t.next=5,fetch("updateMember.php",{method:"post",body:n}).then((function(e){return e.text()}));case 5:r=t.sent,alert(r),e.$emit("updateMember");case 8:case"end":return t.stop()}}),t)})))()}}};n("f715");tt.render=et,tt.__scopeId="data-v-109924c4";var nt=tt;function rt(e,t,n,a,c,i){var o=Object(r["B"])("LoginForm");return Object(r["u"])(),Object(r["d"])(o,{onOnLogin:i.redirect},null,8,["onOnLogin"])}Object(r["x"])("data-v-6bf8db42");var at={id:"formWrapper"},ct={class:"mb-3"},it=Object(r["g"])("label",{for:"inpEmail",class:"form-label"},"Email",-1),ot=Object(r["g"])("div",{id:"emailHelp",class:"form-text"}," 本站極易遭駭客攻擊，輸入個資後果自負！ ",-1),st={class:"mb-3"},ut=Object(r["g"])("label",{for:"inpPassword",class:"form-label"},"密碼",-1),dt={class:"mb-3 form-check"},lt=Object(r["g"])("label",{class:"form-check-label",for:"cbRememberMe"},"勿忘我",-1),bt={id:"btnWrapper"},ft=Object(r["i"])("註冊會員");function mt(e,t,n,a,c,i){var o=Object(r["B"])("router-link");return Object(r["u"])(),Object(r["f"])("div",at,[Object(r["g"])("form",{id:"frmLogin",ref:"frmLogin",onSubmit:t[5]||(t[5]=Object(r["L"])((function(){}),["prevent"]))},[Object(r["g"])("div",ct,[it,Object(r["K"])(Object(r["g"])("input",{type:"email",class:"form-control",id:"inpEmail",ref:"inpEmail",name:"Email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formData.email=t}),placeholder:"babybo@mail.com","aria-describedby":"emailHelp",required:""},null,512),[[r["H"],e.formData.email]]),ot]),Object(r["g"])("div",st,[ut,Object(r["K"])(Object(r["g"])("input",{type:"password",class:"form-control",id:"inpPassword",ref:"inpPassword",name:"Password","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.password=t}),placeholder:"xxxyyy",required:""},null,512),[[r["H"],e.formData.password]])]),Object(r["g"])("div",dt,[Object(r["K"])(Object(r["g"])("input",{type:"checkbox",class:"form-check-input",id:"cbRememberMe",ref:"cbRememberMe",name:"RememberMe","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.rememberMe=t})},null,512),[[r["G"],e.formData.rememberMe]]),lt]),Object(r["g"])("div",bt,[Object(r["g"])("button",{type:"submit",class:"btn btn-primary",id:"btnSubmit",onClick:t[3]||(t[3]=function(e){return i.login()})}," 登入 "),Object(r["j"])(o,{to:"/register",class:"btn btn-info"},{default:Object(r["J"])((function(){return[ft]})),_:1}),Object(r["g"])("button",{class:"btn btn-warning",id:"btnForgetPassword",onClick:t[4]||(t[4]=function(e){return i.forgetPassword()})}," 忘記密碼 ")])],544)])}Object(r["v"])();var pt={name:"LoginForm",data:function(){var e={dataReady:!1,userInfo:{isLogin:!1,nickName:""},formData:{email:"",password:"",rememberMe:!1}};return e},beforeMount:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{login:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.frmLogin,r=n.checkValidity(),r){t.next=4;break}return t.abrupt("return");case 4:return a=new FormData,a.append("Email",e.$data.formData.email),a.append("Password",e.$data.formData.password),a.append("RememberMe",e.$data.formData.rememberMe),t.next=10,fetch("login.php",{method:"POST",body:a}).then((function(e){return e.text()}));case 10:c=t.sent,"1|OK"==c?(alert("登入成功！伯夷愛貓仙人<3"),e.$emit("onLogin")):alert("登入失敗！貓仙人森氣氣了=.=");case 12:case"end":return t.stop()}}),t)})))()},forgetPassword:function(){this.$router.push("/forgetPassword")}}};n("ec56");pt.render=mt,pt.__scopeId="data-v-6bf8db42";var gt=pt,jt={name:"Login",components:{LoginForm:gt},methods:{redirect:function(){this.$emit("updateMember"),this.$router.push("/")}}};jt.render=rt;var Ot=jt;Object(r["x"])("data-v-534e0990");var vt=Object(r["g"])("div",{id:"headWrapper"},[Object(r["g"])("h2",null,"註冊會員")],-1),ht={id:"formWrapper"},wt={class:"row"},kt=Object(r["g"])("div",{class:"col"},[Object(r["g"])("label",{for:"email"},"請輸入您註冊時所使用的箱信：")],-1),yt={class:"col"},xt={class:"col"},$t=["disabled"],Mt={class:"row",id:"warning",ref:"warning"};function Lt(e,t,n,a,c,i){var o=this;return Object(r["u"])(),Object(r["f"])(r["a"],null,[vt,Object(r["g"])("div",ht,[Object(r["g"])("form",{id:"frmForgetPassword",ref:"frmForgetPassword",onSubmit:t[2]||(t[2]=Object(r["L"])((function(){}),["prevent"]))},[Object(r["g"])("div",wt,[kt,Object(r["g"])("div",yt,[Object(r["K"])(Object(r["g"])("input",{class:"form-control",type:"email",name:"Email",id:"email",placeholder:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.$data.formData.email=e}),required:""},null,512),[[r["H"],this.$data.formData.email]])]),Object(r["g"])("div",xt,[Object(r["g"])("button",{class:"btn btn-outline-warning",type:"button",ref:"btnSubmit",disabled:e.btnDisabled,onClick:t[1]||(t[1]=function(e){return i.resetPassword(e)})},"重設密碼",8,$t)])]),Object(r["g"])("div",Mt,null,512)],544)])],64)}Object(r["v"])();var It={name:"ForgetPassword",data:function(){var e={btnDisabled:!1,formData:{email:"",isValid:""}};return e},beforeMount:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{checkLogin:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("checkLogin.php",{method:"GET"}).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},resetPassword:function(e){var t=this;return Object($["a"])(regeneratorRuntime.mark((function n(){var r,a,c,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$data.btnDisabled=!0,e.preventDefault(),r=t.$refs.warning,r.innerHTML="",a=t.$refs.frmForgetPassword,c=a.checkValidity(),c){n.next=12;break}return r.innerHTML="請輸入您註冊時所使用的信箱！",t.$data.btnDisabled=!1,n.abrupt("return");case 12:return t.$data.formData.isValid=!0,i=new FormData,i.append("Email",t.$data.formData.email),n.next=17,fetch("forgetPassword.php",{method:"POST",body:i}).then((function(e){return e.json()}));case 17:return o=n.sent,r.innerHTML=o.errMsg,n.abrupt("return");case 20:case"end":return n.stop()}}),n)})))()}}};n("c50e");It.render=Lt,It.__scopeId="data-v-534e0990";var Rt=It;function Dt(e,t,n,a,c,i){return Object(r["u"])(),Object(r["f"])("div",null,"logout")}var St={name:"Logout",created:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:n=t.sent,n&&e.$router.push("/");case 4:case"end":return t.stop()}}),t)})))()},methods:{logout:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("logout.php",{method:"get"}).then((function(e){return e.json()}));case 2:return n=t.sent,n["isLogin"]||e.$emit("userLogin",{isLogin:!1,nickname:""}),t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()}}};St.render=Dt;var Ct=St;Object(r["x"])("data-v-58d6c994");var _t=Object(r["g"])("div",{id:"headWrapper"},[Object(r["g"])("h2",null,"註冊會員")],-1),Pt=Object(r["h"])('<div class="row" data-v-58d6c994><div class="col-md-2" data-v-58d6c994><label data-v-58d6c994>*Email</label></div><div class="col-md-4" data-v-58d6c994><input type="email" id="email" name="email" class="form-control" required data-v-58d6c994></div><div class="col-md-2" data-v-58d6c994><label data-v-58d6c994>暱稱</label></div><div class="col-md-4" data-v-58d6c994><input type="text" id="nickname" name="nickname" class="form-control" data-v-58d6c994></div></div><div class="row" data-v-58d6c994><div class="col-md-2" data-v-58d6c994><label data-v-58d6c994>*密碼</label></div><div class="col-md-4" data-v-58d6c994><input type="password" id="password" name="password" class="form-control" required data-v-58d6c994></div><div class="col-md-2" data-v-58d6c994><label data-v-58d6c994>*再次輸入密碼</label></div><div class="col-md-4" data-v-58d6c994><input type="password" id="password2" name="password2" class="form-control" required data-v-58d6c994></div></div><div class="row" data-v-58d6c994><p id="warning" data-v-58d6c994>注意！本站會員密碼寫入資料庫前不會先hash過（明碼），所以請勿使用自己常用的密碼來註冊！</p></div>',3),Et={class:"row"},Wt=Object(r["g"])("div",{class:"col-md-4"},null,-1),Ht={class:"col-md-4",id:"btnWrapper"},Bt=["disabled"],Tt={class:"btn btn-secondary",ref:"btnCancel",type:"reset"},Ut=Object(r["g"])("div",{class:"col-md-4"},null,-1),Vt={id:"errMsg",ref:"errMsg"};function Ft(e,t,n,a,c,i){return Object(r["u"])(),Object(r["f"])(r["a"],null,[_t,Object(r["g"])("form",{id:"frmRegister",ref:"frmRegister",method:"post",onSubmit:t[1]||(t[1]=Object(r["L"])((function(){}),["prevent"]))},[Pt,Object(r["g"])("div",Et,[Wt,Object(r["g"])("div",Ht,[Object(r["g"])("button",{class:"btn btn-primary",ref:"btnSend",type:"submit",disabled:e.btnDisabled,onClick:t[0]||(t[0]=function(e){return i.register()})},"註冊",8,Bt),Object(r["g"])("button",Tt,"清除",512)]),Ut]),Object(r["g"])("div",Vt,null,512)],544)],64)}Object(r["v"])();var Jt={name:"Register",data:function(){var e={btnDisabled:!1,responseMsg:{isSuccess:!1,errMsg:""}};return e},methods:{register:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$data.btnDisabled=!0,e.$refs.errMsg.innerHTML=e.$data.responseMsg.errMsg,n=e.$refs.frmRegister,r=new FormData(e.$refs.frmRegister),a=n.checkValidity(),a){t.next=13;break}return e.$data.responseMsg.isSuccess=!1,e.$data.responseMsg.errMsg="請輸入必填資料！",e.$refs.errMsg.innerHTML=e.$data.responseMsg.errMsg,e.$data.btnDisabled=!1,t.abrupt("return");case 13:if(r.get("password")==r.get("password2")){t.next=19;break}return e.$data.responseMsg.isSuccess=!1,e.$data.responseMsg.errMsg="密碼不一致！",e.$refs.errMsg.innerHTML=e.$data.responseMsg.errMsg,e.$data.btnDisabled=!1,t.abrupt("return");case 19:return t.next=21,fetch("register.php",{method:"POST",body:r}).then((function(e){return e.json()}));case 21:c=t.sent,e.$data.responseMsg=c,c["isSuccess"],e.$refs.errMsg.innerHTML=e.$data.responseMsg.errMsg;case 24:case"end":return t.stop()}}),t)})))()}}};n("4104");Jt.render=Ft,Jt.__scopeId="data-v-58d6c994";var Kt=Jt,At=[{path:"/",name:"Home",component:G},{path:"/discuss",name:"Discuss",component:xe},{path:"/member",name:"Member",component:nt},{path:"/login",name:"Login",component:Ot},{path:"/forgetPassword",name:"ForgetPassword",component:Rt},{path:"/logout",name:"Logout",component:Ct},{path:"/register",name:"Register",component:Kt}],Gt=Object(I["a"])({history:Object(I["b"])(),routes:At}),qt=Gt;Object(r["c"])(L).use(qt).mount("#app"),window.addEventListener("DOMContentLoaded",(function(e){var t=document.getElementById("btnToggleSideBar"),n=document.getElementById("sideBar"),r=window.getComputedStyle(n),a=document.querySelectorAll(".my-link"),c=document.getElementById("main");"off"==localStorage.getItem("sideBar")&&n.classList.add("off"),n.style.display="block",t.addEventListener("click",(function(){n.classList.toggle("off"),"off"==localStorage.getItem("sideBar")?localStorage.setItem("sideBar","on"):localStorage.setItem("sideBar","off")})),a.forEach((function(e){e.addEventListener("click",(function(e){"absolute"==r.getPropertyValue("position")&&(n.classList.add("off"),localStorage.setItem("sideBar","off"))}))})),c.addEventListener("click",(function(e){"absolute"==r.getPropertyValue("position")&&(n.classList.add("off"),localStorage.setItem("sideBar","off"))}))}))},"61b5":function(e,t,n){},"6f91":function(e,t,n){},"7d70":function(e,t,n){},"9cf8":function(e,t,n){},aafe:function(e,t,n){},c50e:function(e,t,n){"use strict";n("9cf8")},d75e:function(e,t,n){"use strict";n("d7a5")},d7a5:function(e,t,n){},ec56:function(e,t,n){"use strict";n("6f91")},ecfe:function(e,t,n){"use strict";n("61b5")},f5e6:function(e,t,n){},f715:function(e,t,n){"use strict";n("7d70")}});
//# sourceMappingURL=app.6e1ef7e6.js.map